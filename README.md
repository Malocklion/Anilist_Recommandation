# ğŸ¯ AniList Smart Recommendations

> A sophisticated Chrome Extension that recommends anime based on your favorites and AniList activity using an intelligent relevance algorithm.

<p align="center">
  <img src="icons/icon128.png" alt="AniList Smart Recommendations Logo" width="128" />
</p>

---

## âœ¨ Features

- ğŸ” **OAuth2 Integration** â€” Seamless one-click login with your AniList account.
- â­ **Smart Relevance Algorithm** â€” Personalized scoring based on your favorites (Ã—2), top-rated shows (Ã—1), common tags (+0.5), and preferred genres (+0.3).
- ğŸ­ **Genre Diversity** â€” Smart capping (max 5 anime per genre) to ensure a varied recommendation list and avoid monotony.
- ğŸ“‹ **List Status Tracking** â€” Automatically identifies anime already in your "Plan to Watch" list.
- â• **Quick Add** â€” Add recommended anime to your planning list with a single click.
- ğŸ” **Advanced Filtering** â€” Filter recommendations by specific genres and formats (TV, Movie, OVA, etc.).
- ğŸ’¡ **"Backstage" Insights** â€” Detailed breakdown of *why* each anime was recommended to you.
- âš¡ **High Performance** â€” Utilizes compound GraphQL queries for rapid data fetching (~3-5s).
- ğŸ—„ï¸ **Smart Caching** â€” Results are cached for 24 hours for instant loading on subsequent visits.
- ğŸ”§ **Debug Inspector** â€” Dedicated dashboard to explore your user data and GraphQL query performance.

## ğŸ“¸ Overview

The extension opens as a sleek popup featuring a Netflix-inspired dark UI:
- **Grid Layout**: Displays anime covers, scores, and genres.
- **Backstage Panel**: Explains the relevance score calculation.
- **Interactive Filters**: Easily sort by genre and media format.

## ğŸš€ Installation

### 1. Clone the Repository

```bash
git clone https://github.com/YOUR_USERNAME/anilist-smart-recommendations.git
cd anilist-smart-recommendations
```

### 2. Create your AniList App

1. Go to [AniList Developer Settings](https://anilist.co/settings/developer).
2. Click **"Create New Client"**.
3. Fill in the details:
   - **Name**: Your extension name (e.g., "My Smart Recs").
   - **Redirect URL**: `https://YOUR_EXTENSION_ID.chromiumapp.org/`
   
   > ğŸ’¡ *You will get your actual Extension ID in the next step.*

### 3. Load Extension in Chrome

1. Navigate to `chrome://extensions/`.
2. Enable **Developer mode** (toggle in the top-right corner).
3. Click **"Load unpacked"**.
4. Select the project directory (`anilist-smart-recommendations`).
5. **Copy the ID** of the extension generated by Chrome (displayed under the extension name).

### 4. Configure Client ID

1. Open the `config.js` file in the project root.
2. Replace `YOUR_CLIENT_ID` with the Client ID from your AniList Developer settings:

```javascript
const CONFIG = {
  ANILIST_CLIENT_ID: "12345",  // â† Paste your Client ID here
};
```

3. Return to [AniList Developer Settings](https://anilist.co/settings/developer).
4. Update the **Redirect URL** with your specific Extension ID:
   ```
   https://abcdefghijklmnop.chromiumapp.org/
   ```
5. Reload the extension in `chrome://extensions/` to apply changes.

### 5. Usage

1. Click the extension icon in the Chrome toolbar.
2. Click **"Login"** to authenticate via AniList.
3. Enjoy your personalized recommendations! ğŸ‰

## ğŸ§® Scoring Algorithm

Each recommended anime is assigned a **Relevance Score**:

| Metric | Weight | Description |
| :--- | :--- | :--- |
| **Favorite Source** | Ã— 2 pts | Derived from one of your favorite animes. |
| **Top Rated Source** | Ã— 1 pt | Derived from a highly rated anime in your list. |
| **Common Tag** | + 0.5 / tag | Bonus for tags matching your profile (Max 3 = +1.5). |
| **Common Genre** | + 0.3 / genre | Bonus for genres matching your top 10 (Max 3 = +0.9). |

**Diversity Check**: To prevent saturation, the list is capped at a maximum of 5 anime from the same primary genre.

### Processing Pipeline

```mermaid
graph TD
    A[Favorites (Max 15) + Top Rated (Max 10)] --> B[Compound GraphQL Queries]
    B --> C[Filtering]
    C --> D[Score Calculation]
    D --> E[Sort & Diversify]
    E --> F[Display & Cache]
```

## ğŸ“ Project Structure

```text
â”œâ”€â”€ manifest.json      # Manifest V3 Configuration
â”œâ”€â”€ config.js          # âš ï¸ AniList Client ID Configuration
â”œâ”€â”€ popup.html         # Popup Interface HTML
â”œâ”€â”€ popup.js           # Core Logic (Authentication, Engine, UI)
â”œâ”€â”€ style.css          # Netflix-inspired Dark Theme
â”œâ”€â”€ debug.html         # Debug Inspector Page
â”œâ”€â”€ debug.js           # Debug Logic
â”œâ”€â”€ icons/             # App Icons
â”‚   â”œâ”€â”€ icon16.png
â”‚   â”œâ”€â”€ icon48.png
â”‚   â””â”€â”€ icon128.png
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸ—ï¸ Architecture

The `popup.js` file is structured into four main classes:

| Class | Role |
| :--- | :--- |
| `AuthManager` | Handles OAuth2 implicit grant, token management, user profile fetching, and API retry logic. |
| `RecommendationEngine` | Manages data fetching (favorites, user lists), executes compound queries, and calculates relevance scores. |
| `UIRenderer` | Handles DOM manipulation, card generation, filtering logic, and the "Backstage" detailed view. |
| `App` | Orchestrates initialization, caching mechanisms, and state persistence. |

## ğŸ”’ Privacy & Security

- **Client-Side Only** â€” No backend servers. All logic runs locally in your browser, communicating directly with the official AniList API.
- **Secure Storage** â€” OAuth2 tokens are stored securely in `chrome.storage.local` (sandboxed by Chrome).
- **No Data Sharing** â€” Your data is never sent to third-party servers or analytics.
- **Strict CSP** â€” `script-src 'self'` policy enforces that no inline or external scripts can run.
- **Client ID** â€” The AniList Client ID is a public identifier, but the Redirect URI ensures security by binding it to your specific Extension ID.

## ğŸ› ï¸ Debugging

- Click the ğŸ” icon in the popup header to launch the **Debug Inspector**.
- Analyze your fetched favorites, user tags, genre preferences, and inspect the raw GraphQL queries being sent.
- Includes direct links to the AniList GraphQL Explorer for testing queries.

## ğŸ“ License

Distributed under the MIT License. Feel free to use, modify, and distribute properly.

## ğŸ™ Credits

- Data provided by the [AniList API](https://anilist.gitbook.io/anilist-apiv2-docs/).
- UI design inspired by modern streaming platforms.
